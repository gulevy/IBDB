

<h1>{{title}}</h1>
<div>
	<button type="button" class="btn btn-info" ng-click="go('/proposalRegister')">
	 <span class="glyphicon glyphicon-plus"></span> Add new book
	</button>
</div>
<br> </br>


    <table class="table table-striped">
	<tr>
	    <th>Picture</th>
		<th>Name</th>
		<th>Author Name</th>
		<th>Category</th>
		<th>Release date</th>
		<th>Publisher name</th>
		<th>Abstract</th>
		<th>Actions</th>
	</tr>
	<tr ng-repeat="proposal in proposals | filter:searchText"  ng-if="proposal.proposalStatus=='approved'">
	    <td>
		   <div class="col-xs-1 col-md-3">
		    <a href="../../assets/images/books/{{proposal.book.imageName}}" class="thumbnail">
		    <img ng-src="../../assets/images/books/{{proposal.book.imageName}}">
		    </a>
		  </div>
		</td>
		<td>
		   {{proposal.book.name}}
		</td>
		<td>
		   {{proposal.book.author.firstName}} {{proposal.book.author.lastName}}
		</td>
	    <td>
	       {{proposal.book.bookCategory.name}}
	    </td>
	    
	    <td>
	       {{proposal.book.releaseDate}}
	    </td>		
		
		<td>
		   {{proposal.book.publisherName}}
		</td>
		<td  style="width: 450px;">
		    <p> {{proposal.book.bookAbstract}}</p>
		</td>
	
		<td>
		<button type="button" class="btn btn-danger" ng-click="removeBook(proposal.book.bookId)" ng-show="user.userType == 'administrator'">
		    <span class="glyphicon glyphicon-remove-sign"></span> Remove
		 </button>
		
		<button type="button" class="btn btn-primary"  ng-click="toggle('edit', proposal.book.bookId)" ng-show="user.userType == 'administrator'">
		    <span class="glyphicon glyphicon-edit"></span> Edit
		 </button>
		 
		 <button type="button" class="btn btn-success"  ng-click="go('/book/reviews/{{proposal.book.bookId}}')">
		    <span class="glyphicon glyphicon-option-vertical"></span> More
		 </button>
	
		</td>
	</tr>
</table>


<div ui-view></div>

<!-- Modal (Pop up when detail button clicked) -->
            <div class="modal fade" id="bookModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">ª</span></button>
                            <h4 class="modal-title" id="myModalLabel">{{form_title}}</h4>
                        </div>
                        <div class="modal-body">
                        
                            <form name="books" class="form-horizontal" novalidate="" enctype="multipart/form-data">
                         
           						
           				    <div class="form-group error">
                                 <label for="inputEmail3" class="col-sm-3 control-label">Book photo</label>
                                 <div class="col-sm-9">
                                        <input type="file"  file-model="book.file">            
                                 </div>
                            </div>
                            
                                <div class="form-group error">
                                    <label for="inputEmail3" class="col-sm-3 control-label">Name</label>
                                    <div class="col-sm-9">
                                        <input type="text" class="form-control has-error" id="name" name="name" placeholder="Fullname" value="{{$scope.book.name}}" 
                                        ng-model="book.name" ng-required="true">
                                        <span class="help-inline" 
                                        ng-show="book.name.$invalid && book.name.$touched">Name field is required</span>
                                    </div>
                                </div>
                                
						          <div class="form-group error">
                                    <label for="inputEmail3" class="col-sm-3 control-label">Category Name</label>
                                    <div class="col-sm-9">
                                        <select class="form-control" ng-options="item as item.name for item in categories track by item.id" ng-model="book.bookCategory"></select>
                                     
                                        <span class="help-inline" ng-show="form.category.$dirty && form.category.$error.required" class="help-block">category is required</span>
 
                                    </div>
                                </div>
		
                                  <div class="form-group error" ng-class="{ 'has-error': form.category.$dirty && form.category.$error.required }">
                                    <label for="inputEmail3" class="col-sm-3 control-label">Author Name</label>
                                    <div class="col-sm-9">
 	                         			 <select class="form-control" ng-options="item as item.firstName for item in authors track by item.authorId" ng-model="book.author"></select>
                                     
                                        <span class="help-inline" 
                                        ng-show="book.author.firstName.$invalid && book.author.firstName.$touched">Author id field is required</span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="inputEmail3" class="col-sm-3 control-label">publisher name</label>
                                    <div class="col-sm-9">
                                        <input type="text" class="form-control" id="publisherName" name="publisherName" placeholder="publisherName" value="{{$scope.book.publisherName}}" 
                                        ng-model="book.publisherName" ng-required="true">
                                    <span class="help-inline" 
                                        ng-show="book.publisherName.$invalid && book.publisherName.$touched">publisher name field is required</span>
                                    </div>
                                </div>
                                
                                 <div class="form-group">
                                    <label for="inputEmail3" class="col-sm-3 control-label">Release date</label>
                                    <div class="col-sm-9">
                                        
                                    <input type="date" name="releaseDate" id="releaseDate" class="form-control" ng-model="book.releaseDate" value="{{$scope.book.releaseDate}}" placeholder="yyyy-MM-dd" />                             
                                    <span class="help-inline" 
                                        ng-show="book.releaseDate.$invalid && book.releaseDate.$touched">Release date field is required</span>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="inputEmail3" class="col-sm-3 control-label">book abstract</label>
                                    <div class="col-sm-9">
                                        <input type="text" class="form-control" id="bookAbstract" name="bookAbstract" placeholder="bookAbstract" value="{{$scope.book.bookAbstract}}" 
                                        ng-model="book.bookAbstract" ng-required="true">
                                    <span class="help-inline" 
                                        ng-show="book.bookAbstract.$invalid && book.bookAbstract.$touched">book abstract field is required</span>
                                    </div>
                                </div>

                            </form>
                            
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" id="btn-save" ng-click="save($scope.modalstate)" ng-disabled="book.$invalid">Save changes</button>
                        </div>
                    </div>
                </div>
            </div>
        </div> 